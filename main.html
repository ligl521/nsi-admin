<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="//at.alicdn.com/t/font_534283_x8uxnu4trbl6jemi.css">
    <link rel="stylesheet" href="./plugins/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="./plugins/font-awesome/css/font-awesome.min.css" media="all">
    <style>
        .info-box {
            height: 85px;
            background-color: white;
            background-color: #ecf0f5;
        }
        .info-box{   border-radius: 0 4px 4px 0;}
        .info-box .info-box-icon { border-radius: 8px 0 0 5px; display: block;  float: left;  height: 85px;  width: 85px;  text-align: center;  font-size: 45px;  line-height: 85px;  background: rgba(0, 0, 0, 0.2);  }
        .info-box .info-box-content {
            padding: 5px 10px;
            margin-left: 85px;
        }
        
        .info-box .info-box-content .info-box-text {
            display: block;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            text-transform: uppercase;
        }
        
        .info-box .info-box-content .info-box-number {
            display: block;
            font-weight: bold;
            font-size: 18px;
        }
        
        .major {
            font-weight: 10px;
            color: #01AAED;
        }
        
        .main {
            margin-top: 25px;
        }
        
        .main .layui-row {
            margin: 10px 0;
        }

        /*myself*/
        .layui-table {
            margin-top: 0;
            border-left: 5px solid #e2e2e2;
        }
        .my-Pd0{padding:3px;}
        .text-center{text-align: center;}
        .info-box .info-box-content .my-number {
            display: block;
            font-weight: bold;
            font-size: 25px;
            margin-top: 10px;
            margin-bottom: 2px;
        }
        .info-box .info-box-content .my-text {
           font-size: 16px;
           color: #333;
        }


    </style>
</head>

<body>
    <div class="layui-fluid main" style="margin-top: 15px;">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md2 my-Pd0">
                <div class="info-box" id="info-box01">
                    <span class="info-box-icon" style="background-color:#f39c12 !important;color:white;"><i class="fa fa-user-o layui-anim rotate" aria-hidden="true" ></i></span>
                    <div class="info-box-content text-center">
                        <span class="info-box-number my-number" id="lastWeekCount"> </span>
                        <span class="info-box-text my-text">上周注册用户</span>
                    </div>
                </div>
            </div>
            <div class="layui-col-md2 my-Pd0">
                <div class="info-box" id="info-box02">
                    <span class="info-box-icon my-icon" style="background-color:#00c0ef !important;color:white;"> <i class="fa fa-user-plus layui-anim rotate"  aria-hidden="true"></i></span>
                    <div class="info-box-content text-center">
                        <span class="info-box-number my-number" id="onWeekCount"> </span>
                        <span class="info-box-text my-text">本周注册用户</span>
                    </div>
                </div>
            </div>
            <div class="layui-col-md2 my-Pd0">
                <div class="info-box" id="info-box03">
                    <span class="info-box-icon " style="background-color:#dd4b39 !important;color:white;"><i class="fa fa-users  layui-anim rotate" ></i></span>
                    <div class="info-box-content text-center">
                        <span class="info-box-number my-number" id="pageCount"> </span>
                        <span class="info-box-text my-text">用户总数</span>
                    </div>
                </div>
            </div>
            <div class="layui-col-md2 my-Pd0">
                <div class="info-box" id="info-box04">
                    <span class="info-box-icon " style="background-color:#00a65a !important;color:white;"><i class="fa fa-pie-chart  layui-anim rotate" aria-hidden="true"></i></span>
                    <div class="info-box-content text-center">
                        <span class="info-box-text" style="padding-top:10px;"><a href="http://www.xinxueshuo.cn">官网数据统计</a></span>
                        <span class="info-box-number"><a href="javascript:;" class="layui-btn layui-btn-normal" id="getWebsiteData">获取数据</a></span>
                    </div>
                </div>
            </div>
            <div class="layui-col-md2 my-Pd0">
                <div class="info-box" id="info-box05">
                    <span class="info-box-icon " style="background-color:#00a65a !important;color:white;"><i class="fa fa-history  layui-anim rotate" aria-hidden="true"></i></span>
                    <div class="info-box-content text-center">
                        <span class="info-box-text" style="padding-top:10px;">数据库操作历史</span>
                        <span class="info-box-number"><a href="javascript:;" class="layui-btn layui-btn-normal" id="getLogData">获取数据</a></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-row" style="margin-top: 20px;">
            <div class="layui-col-md6" style="padding: 7.5px;">
                 <div id="main" style="width: 100%;height: 400px;"></div>

            </div>
            <div class="layui-col-md6" style="padding: 7.5px;">
                <div id="main02" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-md12">
                <blockquote class="layui-elem-quote  layui-text registerTable" style="margin-bottom: 0;background:#00c0ef;color: #fff;">最新注册用户
                    <div class="layui-inline ">
                        <div class="layui-form layui-input-inline" >
                            <!--全局搜索：-->
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" value="" placeholder="请输入关键字" class="layui-input search_input" id="registerReload">
                        </div>
                        <a class="layui-btn search_btn" data-type="reload" ><i class="layui-icon">&#xe615;</i> 查询</a>
                    </div>
                    <div class="layui-inline">
                        <a class="layui-btn recommend" style="background-color:#5FB878" onclick="window.location.reload()"> <i class="layui-icon">&#x1002;</i> 刷新</a>
                    </div>
                </blockquote>
                <table class="layui-hide" id="registerUser"></table>
            </div>
        </div>


        </div>
    </div>

    <!--数据操作-->
    <script type="text/html" id="barDemo">
        <a class="layui-btn  layui-btn-xs" lay-event="detail">注册成功</a>
        <!--<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>-->
        <!--<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>-->
    </script>


    <script src="./plugins/layui/layui.js"></script>
    <script>
        layui.use('jquery', function() {
            var $ = layui.jquery;
            $('#test').on('click', function() {
                parent.message.show({
                    skin: 'cyan'
                });
            });
        });
    </script>

    <script src="./plugins/echart/echarts-4.0.2.min.js"></script>
    <script src="./plugins/jq/jquery.min.js"></script>
    <script src="./src/js/config.js"></script>

    <script>
        <!--注册用户周统计-->
            var myChart = echarts.init(document.getElementById('main'))
            myChart.showLoading();
            $.ajax({
                type:'get',
                async:true,
                url:'http://'+changeUrl.address+'/Admin_api?whereFrom=searchEverydayRegisterCount',
                dataType:"json",
                contentType:"application/json;charset=UTF-8",
                success:function(jsonData){
//                    console.log(jsonData)
                    myChart.hideLoading()
                    option = {
                        title: {
                            text: '注册用户日变化图（前20日）',
                            subtext: '单位/人',
                        },
                        tooltip: {
                            trigger: 'axis'
                        },
                        legend: {
                            data:['注册用户']
                        },
                        toolbox: {
                            show: true,
                            feature: {
                                dataView: {readOnly: false},
                                magicType: {type: ['line', 'bar']},
                                restore: {},
                                saveAsImage: {}
                            }
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: jsonData.Day.reverse()
                        },
                        yAxis: {
                            type: 'value',
                            max:15,
                            interval:3,
                            axisLabel: {
                                formatter: '{value}'
                            }
                        },
                        series: [{
                            smooth: true,
                            name:'注册用户',
                            data: jsonData.Count.reverse(),
                            type: 'line',
                           
                            markPoint: {
                                data: [
                                    {type: 'max', name: '最大值'},
                                    {type: 'min', name: '最小值'}
                                ]
                            },
                            markLine: {
                                data: [
                                    {type: 'average', name: '平均值'}
                                ]
                            }
                        }]
                    };
                    myChart.setOption(option)
                },
                error:function () {
                    alert('请求数据错误')
                    myChart.hideLoading()
                }
            });

////////////////////////////////////////////////////////////////////////////////////////
            var myChart02 = echarts.init(document.getElementById('main02'))
            option02 = {
                title: {
                    text: '注册用户周变化图（数据为假）',
                    subtext: '单位/人',
                },
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data:['注册用户']
                },
                toolbox: {
                    show: true,
                    feature: {
                        dataView: {readOnly: false},
                        magicType: {type: ['line', 'bar']},
                        restore: {},
                        saveAsImage: {}
                    }
                },
                xAxis:  {
                    type: 'category',
                    boundaryGap: false,
                    data: ['周一','周二','周三','周四','周五','周六','周日']
                },
                yAxis: {
                    type: 'value',
                    max:50,
                    interval:10,
                    axisLabel: {
                        formatter: '{value}'
                    }
                },
                series: [
                    {
                        name:'注册用户',
                        type:'line',
                        data:[11, 11, 15, 13, 12, 13, 10],
                        markPoint: {
                            data: [
                                {type: 'max', name: '最大值'},
                                {type: 'min', name: '最小值'}
                            ]
                        },
                        markLine: {
                            data: [
                                {type: 'average', name: '平均值'}
                            ]
                        }
                    }

                ]
            };
            myChart02.setOption(option02)
    </script>


    <script src="./src/js/main/main.js?v=1.0.2"></script>


</body>

</html>